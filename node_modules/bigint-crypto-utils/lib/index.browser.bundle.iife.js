var bigintCryptoUtils=function(n){"use strict";function t(n){return(n=BigInt(n))>=0n?n:-n}function r(n){if(1n===(n=BigInt(n)))return 1;let t=1;do{t++}while((n>>=1n)>1n);return t}function e(n,t){if((n=BigInt(n))<=0n|(t=BigInt(t))<=0n)return NaN;let r=0n,e=1n,i=1n,o=0n;for(;0n!==n;){const s=t/n,a=t%n,c=r-i*s,u=e-o*s;t=n,n=a,r=i,e=o,i=c,o=u}return{b:t,x:r,y:e}}function i(n,r){if(n=t(n),r=t(r),0n===n)return r;if(0n===r)return n;let e=0n;for(;!(1n&(n|r));)n>>=1n,r>>=1n,e++;for(;!(1n&n);)n>>=1n;do{for(;!(1n&r);)r>>=1n;if(n>r){const t=n;n=r,r=t}r-=n}while(r);return n<<e}function o(n,t){const r=e(a(n,t),t);return 1n!==r.b?NaN:a(r.x,t)}function s(n,r,e){if(0n===(e=BigInt(e)))return NaN;if(1n===e)return 0n;if(n=a(n,e),(r=BigInt(r))<0n)return o(s(n,t(r),e),e);let i=1n;for(;r>0;)r%2n===1n&&(i=i*n%e),r/=2n,n=n**2n%e;return i}function a(n,t){return(t=BigInt(t))<=0?NaN:(n=BigInt(n)%t)<0?n+t:n}function c(n,t=16){return"number"==typeof n&&(n=BigInt(n)),new Promise((r,e)=>{const i=new Worker(w());i.onmessage=n=>{i.terminate(),r(n.data.isPrime)},i.onmessageerror=n=>{e(n)},i.postMessage({rnd:n,iterations:t,id:0})})}function u(n,t=1n){if(n<=t)throw new Error("max must be > min");const e=n-t,i=r(e);let o;do{o=l(f(i))}while(o>e);return o+t}function f(n,t=!1){if(n<1)throw new RangeError(`bitLength MUST be > 0 and it is ${n}`);const r=d(Math.ceil(n/8),!1),e=n%8;if(e&&(r[0]=r[0]&2**e-1),t){const n=e?2**(e-1):128;r[0]=r[0]|n}return r}function g(n,t=!1){if(n<1)throw new RangeError(`byteLength MUST be > 0 and it is ${n}`);return new Promise((function(r){const e=new Uint8Array(n);crypto.getRandomValues(e),t&&(e[0]=128|e[0]),r(e)}))}function d(n,t=!1){if(n<1)throw new RangeError(`byteLength MUST be > 0 and it is ${n}`);{const r=new Uint8Array(n);return crypto.getRandomValues(r),t&&(r[0]=128|r[0]),r}}function l(n){let t=0n;for(const r of n.values()){const n=BigInt(r);t=(t<<BigInt(8))+n}return t}function w(){let n=`'use strict';const ${e.name}=${e.toString()};const ${o.name}=${o.toString()};const ${s.name}=${s.toString()};const ${a.name}=${a.toString()};const ${f.name}=${f.toString()};const ${d.name}=${d.toString()};const ${u.name}=${u.toString()};const ${c.name}=${m.toString()};${r.toString()}${l.toString()}`;return n+=`onmessage = ${async function(n){const t=await c(n.data.rnd,n.data.iterations);postMessage({isPrime:t,value:n.data.rnd,id:n.data.id})}.toString()};`,function(n){n=`(() => {${n}})()`;const t=new Blob([n],{type:"text/javascript"});return window.URL.createObjectURL(t)}(n)}function m(n,t=16){if(2n===n)return!0;if(0n===(1n&n)||1n===n)return!1;const r=[3n,5n,7n,11n,13n,17n,19n,23n,29n,31n,37n,41n,43n,47n,53n,59n,61n,67n,71n,73n,79n,83n,89n,97n,101n,103n,107n,109n,113n,127n,131n,137n,139n,149n,151n,157n,163n,167n,173n,179n,181n,191n,193n,197n,199n,211n,223n,227n,229n,233n,239n,241n,251n,257n,263n,269n,271n,277n,281n,283n,293n,307n,311n,313n,317n,331n,337n,347n,349n,353n,359n,367n,373n,379n,383n,389n,397n,401n,409n,419n,421n,431n,433n,439n,443n,449n,457n,461n,463n,467n,479n,487n,491n,499n,503n,509n,521n,523n,541n,547n,557n,563n,569n,571n,577n,587n,593n,599n,601n,607n,613n,617n,619n,631n,641n,643n,647n,653n,659n,661n,673n,677n,683n,691n,701n,709n,719n,727n,733n,739n,743n,751n,757n,761n,769n,773n,787n,797n,809n,811n,821n,823n,827n,829n,839n,853n,857n,859n,863n,877n,881n,883n,887n,907n,911n,919n,929n,937n,941n,947n,953n,967n,971n,977n,983n,991n,997n,1009n,1013n,1019n,1021n,1031n,1033n,1039n,1049n,1051n,1061n,1063n,1069n,1087n,1091n,1093n,1097n,1103n,1109n,1117n,1123n,1129n,1151n,1153n,1163n,1171n,1181n,1187n,1193n,1201n,1213n,1217n,1223n,1229n,1231n,1237n,1249n,1259n,1277n,1279n,1283n,1289n,1291n,1297n,1301n,1303n,1307n,1319n,1321n,1327n,1361n,1367n,1373n,1381n,1399n,1409n,1423n,1427n,1429n,1433n,1439n,1447n,1451n,1453n,1459n,1471n,1481n,1483n,1487n,1489n,1493n,1499n,1511n,1523n,1531n,1543n,1549n,1553n,1559n,1567n,1571n,1579n,1583n,1597n];for(let t=0;t<r.length&&r[t]<=n;t++){const e=r[t];if(n===e)return!0;if(n%e===0n)return!1}let e=0n;const i=n-1n;let o=i;for(;o%2n===0n;)o/=2n,++e;const a=i/2n**e;do{let t=s(u(i,2n),a,n);if(1n===t||t===i)continue;let r=1;for(;r<e&&(t=s(t,2n,n),t!==i);){if(1n===t)return!1;r++}if(t!==i)return!1}while(--t);return!0}let h=!1;return self.Worker&&(h=!0),n.abs=t,n.bitLength=r,n.eGcd=e,n.gcd=i,n.isProbablyPrime=c,n.lcm=function(n,r){return n=BigInt(n),r=BigInt(r),0n===n&&0n===r?0n:t(n*r)/i(n,r)},n.max=function(n,t){return(n=BigInt(n))>=(t=BigInt(t))?n:t},n.min=function(n,t){return(n=BigInt(n))>=(t=BigInt(t))?t:n},n.modInv=o,n.modPow=s,n.prime=function(n,t=16){if(n<1)throw new RangeError(`bitLength MUST be > 0 and it is ${n}`);if(!h){let r=0n;do{r=l(f(n,!0))}while(!m(r,t));return new Promise(n=>{n(r)})}return new Promise(r=>{const e=[],i=(i,o)=>{if(i.isPrime){for(let n=0;n<e.length;n++)e[n].terminate();for(;e.length;)e.pop();r(i.value)}else{const r=l(f(n,!0));try{o.postMessage({rnd:r,iterations:t,id:i.id})}catch(n){}}};{const n=w();for(let t=0;t<self.navigator.hardwareConcurrency-1;t++){const t=new Worker(n);t.onmessage=n=>i(n.data,t),e.push(t)}}for(let r=0;r<e.length;r++){const i=l(f(n,!0));e[r].postMessage({rnd:i,iterations:t,id:r})}})},n.primeSync=function(n,t=16){if(n<1)throw new RangeError(`bitLength MUST be > 0 and it is ${n}`);let r=0n;do{r=l(f(n,!0))}while(!m(r,t));return r},n.randBetween=u,n.randBits=async function(n,t=!1){if(n<1)throw new RangeError(`bitLength MUST be > 0 and it is ${n}`);const r=Math.ceil(n/8),e=n%8,i=await g(r,!1);if(e&&(i[0]=i[0]&2**e-1),t){const n=e?2**(e-1):128;i[0]=i[0]|n}return i},n.randBitsSync=f,n.randBytes=g,n.randBytesSync=d,n.toZn=a,n}({});
